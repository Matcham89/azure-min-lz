name: trigger-azure
on:
  branches:
    - main
jobs:
  call-azure-pipeline:
    runs-on: ubuntu-latest
    steps:
    - name: Azure Pipelines Action
      uses: Azure/pipelines@v1
      with:
        azure-devops-project-url: https://dev.azure.com/cjmatcham/azure-dev-ops-blob
        azure-pipeline-name: 'azure-pipelines'
        azure-devops-token: ${{ secrets.AZURE_DEVOPS_TOKEN }}

  # build-and-deploy:
  #   runs-on: ubuntu-latest
  #   permissions: write-all
  #   steps:
  #   - uses: azure/login@v1
  #     with:
  #       client-id: ${{ secrets.AZURE_CLIENT_ID }}
  #       tenant-id: ${{ secrets.AZURE_TENANT_ID }}
  #       subscription-id: ${{ secrets.AZURE_SUBSCRIPTION_ID }}

    # - name: Create subscription
    #   run: |
    #     az extension add --name subscription \ 
    #     az account create --enrollment-account-name --offer-type {MS-AZR-0017P, MS-AZR-0148P}

    # - name: Create blob container
    #   run: |
    #       az storage container create \
    #       -n test${{ github.run_id }} \
    #       --fail-on-exist \
    #       --account-name azureblobtescm \
        # --public-access {blob, container, off}
        # --blob-endpoint


